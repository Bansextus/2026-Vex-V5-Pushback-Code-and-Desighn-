{"mode":"Text","hardwareTarget":"brain","textContent":"#region VEXcode Generated Robot Configuration\nfrom vex import *\n\n# ======================================================\n# Brain + Controller\n# ======================================================\nbrain = Brain()\ncontroller = Controller(PRIMARY)\n\n# ======================================================\n# Logging Settings\n# ======================================================\nLOG_INTERVAL_MS = 20\nLOG_DIR = \"/usd/\"\nLOG_PREFIX = \"bonkers_log_\"\n\n\ndef deadband(val, band=5):\n    return 0 if abs(val) < band else val\n\n\ndef open_log_file():\n    filename = LOG_DIR + LOG_PREFIX + str(int(brain.timer.system_high_res())) + \".csv\"\n    try:\n        log_file = open(filename, \"w\")\n        header = (\n            \"time_s,axis3,axis2,left_cmd,right_cmd,intake_action,outtake_action,\"\n            \"btnL1,btnL2,btnR1,btnR2,btnA,btnB,btnX,btnY\n\"\n        )\n        log_file.write(header)\n        log_file.flush()\n        return log_file, filename\n    except:\n        return None, \"\"\n\n\ndef compute_actions():\n    left_cmd = deadband(controller.axis3.position())\n    right_cmd = deadband(controller.axis2.position())\n\n    if controller.buttonL1.pressing():\n        intake_action = \"IN\"\n    elif controller.buttonL2.pressing():\n        intake_action = \"OUT\"\n    else:\n        intake_action = \"STOP\"\n\n    if controller.buttonR1.pressing():\n        outtake_action = \"OUT\"\n    elif controller.buttonR2.pressing():\n        outtake_action = \"IN\"\n    else:\n        outtake_action = \"STOP\"\n\n    return left_cmd, right_cmd, intake_action, outtake_action\n\n\n# ======================================================\n# User Control (Logger Only)\n# ======================================================\ndef usercontrol():\n    brain.screen.clear_screen()\n    brain.screen.set_cursor(1, 1)\n    brain.screen.print(\"Basic Bonkers Logger\")\n\n    log_file, log_path = open_log_file()\n    if log_file:\n        brain.screen.set_cursor(2, 1)\n        brain.screen.print(\"Logging to SD\")\n        brain.screen.set_cursor(3, 1)\n        brain.screen.print(log_path)\n    else:\n        brain.screen.set_cursor(2, 1)\n        brain.screen.print(\"No SD card\")\n        brain.screen.set_cursor(3, 1)\n        brain.screen.print(\"Logging disabled\")\n\n    brain.screen.set_cursor(4, 1)\n    brain.screen.print(\"Press X to stop\")\n\n    start_time = brain.timer.system()\n    buffer = []\n    buffer_limit = 25\n\n    while True:\n        left_cmd, right_cmd, intake_action, outtake_action = compute_actions()\n\n        if log_file:\n            t = brain.timer.system() - start_time\n            row = (\n                \"{:.3f},{},{},{},{},{},{},{},{},{},{},{},{},{},{}\n\".format(\n                    t,\n                    controller.axis3.position(),\n                    controller.axis2.position(),\n                    left_cmd,\n                    right_cmd,\n                    intake_action,\n                    outtake_action,\n                    int(controller.buttonL1.pressing()),\n                    int(controller.buttonL2.pressing()),\n                    int(controller.buttonR1.pressing()),\n                    int(controller.buttonR2.pressing()),\n                    int(controller.buttonA.pressing()),\n                    int(controller.buttonB.pressing()),\n                    int(controller.buttonX.pressing()),\n                    int(controller.buttonY.pressing()),\n                )\n            )\n            buffer.append(row)\n            if len(buffer) >= buffer_limit:\n                log_file.write(\"\".join(buffer))\n                log_file.flush()\n                buffer = []\n\n        if controller.buttonX.pressing():\n            break\n\n        wait(LOG_INTERVAL_MS, MSEC)\n\n    if log_file:\n        if len(buffer) > 0:\n            log_file.write(\"\".join(buffer))\n        log_file.close()\n\n    brain.screen.clear_screen()\n    brain.screen.print(\"Logging stopped\")\n    while True:\n        wait(100, MSEC)\n\n\n# ======================================================\n# Autonomous (No Actions)\n# ======================================================\ndef autonomous():\n    pass\n\n\n# ======================================================\n# Competition Setup\n# ======================================================\ncompetition = Competition(usercontrol, autonomous)\n\n\n# ======================================================\n# Keep Program Alive\n# ======================================================\nwhile True:\n    wait(100, MSEC)\n","textLanguage":"python","robotConfig":[],"slot":0,"platform":"V5","sdkVersion":"20240802.15.00.00","appVersion":"4.64.0","fileFormat":"2.0.0","targetBrainGen":"First","v5Sounds":[{"name":"game over","url":"static/sounds/mixkit-arcade-retro-game-over-213.wav"}],"v5SoundsEnabled":false,"aiVisionSettings":{"colors":[],"codes":[],"tags":true,"AIObjects":true,"AIObjectModel":[],"aiModelDropDownValue":null}}